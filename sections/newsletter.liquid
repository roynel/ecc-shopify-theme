<div class="cc-newsletter">
  <div class="newsletter-background-color" style="background-color: {{ section.settings.background_color }};"></div>
  <div class="newsletter-background-image" style="
    {% if section.settings.background_image != blank %}
      background-image: url({{ section.settings.background_image | image_url }});
    {% endif %}
    background-size: {{ section.settings.background_size }};
    background-repeat: {{ section.settings.background_repeat }};
    opacity: {{ section.settings.background_opacity | divided_by: 100.0 }};
  "></div>
  
  <div class="newsletter-content">
    <div class="newsletter-box" style="
      background-color: {{ section.settings.box_background_color }};
      color: {{ section.settings.text_color }};
    ">
      <div class="newsletter-wrapper">
        {% if section.settings.heading != blank %}
          <h2 class="newsletter-heading">{{ section.settings.heading }}</h2>
        {% endif %}
        
        {% if section.settings.text != blank %}
          <div class="newsletter-description">{{ section.settings.text }}</div>
        {% endif %}
        
        <div class="newsletter-form">
        {% form 'customer' %}
          <input type="hidden" name="contact[tags]" value="newsletter">
          <div class="input-group">
            <input 
              type="email"
              name="contact[email]"
              placeholder="{{ section.settings.placeholder }}"
              required
              class="newsletter-input"
            >
            <button type="submit" class="newsletter-button">
              {{ section.settings.button_text }}
            </button>
          </div>
        {% endform %}
      </div>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Newsletter",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Subscribe to the Enchanted Newsletter"
    },
    {
      "type": "richtext",
      "id": "text",
      "label": "Description",
      "default": "<p>Unlock exclusive offers, magical tips, and first looks at new arrivals by signing up for our email blasts! Join our mystical community to stay connected with the latest in witchcraft supplies, spell kits, and enchanting products.</p>"
    },
    {
      "type": "text", 
      "id": "placeholder",
      "label": "Email Placeholder",
      "default": "Your email"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button Text",
      "default": "Subscribe"
    },
    {
      "type": "header",
      "content": "Content Box Settings"
    },
    {
      "type": "color",
      "id": "box_background_color",
      "label": "Box Background Color",
      "default": "rgba(255,255,255,0.1)"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text Color",
      "default": "#FFFFFF"
    },
    {
      "type": "header",
      "content": "Background Settings"
    },
    {
      "type": "image_picker",
      "id": "background_image",
      "label": "Background Image"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background Color",
      "default": "#1A1730"
    },
    {
      "type": "range",
      "id": "background_opacity",
      "label": "Image Opacity",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "%",
      "default": 100
    },
    {
      "type": "select",
      "id": "background_size",
      "label": "Background Size",
      "options": [
        {"value": "cover", "label": "Cover"},
        {"value": "contain", "label": "Contain"},
        {"value": "auto", "label": "Auto"}
      ],
      "default": "cover"
    },
    {
      "type": "select",
      "id": "background_repeat",
      "label": "Background Repeat",
      "options": [
        {"value": "no-repeat", "label": "No Repeat"},
        {"value": "repeat", "label": "Repeat"},
        {"value": "repeat-x", "label": "Repeat X"},
        {"value": "repeat-y", "label": "Repeat Y"}
      ],
      "default": "no-repeat"
    }
  ],
  "presets": [
    {
      "name": "Newsletter Section",
      "category": "Custom Sections"
    }
  ]
}
{% endschema %}
<div class="cc-newsletter">
  <div class="newsletter-container">
    <div class="newsletter-content">
      <div class="newsletter-text">
        {% if section.settings.heading != blank %}
          <h2 class="newsletter-heading">{{ section.settings.heading }}</h2>
        {% endif %}
        
        {% if section.settings.text != blank %}
          <div class="newsletter-description">{{ section.settings.text }}</div>
        {% endif %}
      </div>
      
      <div class="newsletter-form">
        {% form 'customer' %}
          <input type="hidden" name="contact[tags]" value="newsletter">
          <div class="input-group">
            <input 
              type="email"
              name="contact[email]"
              placeholder="{{ section.settings.placeholder }}"
              required
            >
            <button type="submit">
              {{ section.settings.button_text }}
            </button>
          </div>
        {% endform %}
      </div>
    </div>
    <div class="newsletter-image">
      {% if section.settings.image != blank %}
        <img 
          src="{{ section.settings.image | image_url: width: 800 }}"
          alt="{{ section.settings.image.alt | escape }}"
          loading="lazy"
        >
      {% endif %}
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Newsletter",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Join Our Mystical Community"
    },
    {
      "type": "richtext",
      "id": "text",
      "label": "Description",
      "default": "<p>Receive exclusive offers, spiritual insights, and magical updates</p>"
    },
    {
      "type": "text", 
      "id": "placeholder",
      "label": "Email Placeholder",
      "default": "Enter your magical email"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button Text",
      "default": "Subscribe"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Decorative Image"
    },
    {
      "type": "header",
      "content": "Background Settings"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background Color",
      "default": "#1A1730"
    },
    {
      "type": "range",
      "id": "background_opacity",
      "label": "Background Opacity",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "%",
      "default": 100
    }
  ],
  "presets": [
    {
      "name": "Newsletter Section",
      "category": "Custom Sections"
    }
  ]
}
{% endschema %}